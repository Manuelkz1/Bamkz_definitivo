import{u as N,h as y,e as w,d as F,r as k,j as e,L as o,A as x,H as n,i as S,f as C,g as L,S as P,a as $,k as A}from"./index-CsEdGDVt.js";function E(){const{user:i}=N(),r=y(),m=w(),h=F();k.useEffect(()=>{i&&!r.isInitialized&&r.loadFavorites(i.id)},[i]);const g=(t,s)=>{s.preventDefault(),s.stopPropagation(),m.addItem({product:t,quantity:1}),$.success("Producto agregado al carrito")},p=async(t,s)=>{s.preventDefault(),s.stopPropagation(),i&&await r.removeFromFavorites(i.id,t)},u=(t,s)=>{s.preventDefault(),s.stopPropagation(),h(`/product/${t}`)},f=t=>{if(t.shipping_days)return t.shipping_days;if(t.description){const s=t.description.match(/\[shipping_days:(\d+)\]/);if(s&&s[1])return s[1]}return"3-5"},v=t=>{if(!t.promotion)return t.price;switch(t.promotion.type){case"discount":return t.promotion.total_price||t.price;default:return t.price}},l=t=>{if(!t.promotion)return null;switch(t.promotion.type){case"2x1":return"Lleva 2, paga 1";case"3x1":return"Lleva 3, paga 1";case"3x2":return"Lleva 3, paga 2";case"discount":return t.promotion.total_price?`${Math.round((1-t.promotion.total_price/t.price)*100)}% OFF`:null;default:return null}},j=(t=0)=>e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(s=>e.jsx(A,{className:`h-4 w-4 ${s<=Math.round(t)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor"},s))});return r.loading?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs(o,{to:"/",className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(x,{className:"h-5 w-5 mr-2"}),"Volver"]})}),e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500"})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs(o,{to:"/",className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(x,{className:"h-5 w-5 mr-2"}),"Volver"]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-6 border-b border-gray-200 bg-gradient-to-r from-red-500 to-pink-600",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(n,{className:"h-8 w-8 text-white",fill:"currentColor"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Mis Favoritos"}),e.jsxs("p",{className:"text-red-100 text-sm",children:[r.favorites.length," producto",r.favorites.length!==1?"s":""," que te encanta",r.favorites.length===1?"":"n"]})]})]})}),r.favorites.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(n,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No tienes favoritos aún"}),e.jsx("p",{className:"text-gray-500 mb-8 max-w-md mx-auto",children:"Explora nuestros productos y marca como favoritos los que más te gusten. ¡Así podrás encontrarlos fácilmente!"}),e.jsxs(o,{to:"/",className:"inline-flex items-center px-6 py-3 border border-transparent shadow-sm text-base font-medium rounded-lg text-white bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200",children:[e.jsx(n,{className:"h-5 w-5 mr-2"}),"Explorar productos"]})]}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:r.favorites.map(t=>{var c,d;const s=t.product;return s?e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200 border border-gray-100",children:[e.jsxs("div",{className:"relative",children:[e.jsx(o,{to:`/product/${s.id}`,children:e.jsx("img",{src:(c=s.images)==null?void 0:c[0],alt:s.name,className:"w-full h-48 object-cover hover:scale-105 transition-transform duration-200",onError:a=>{const b=a.target;b.src="https://via.placeholder.com/400x300?text=No+Image"}})}),e.jsx("button",{onClick:a=>p(s.id,a),className:"absolute top-2 right-2 p-2 bg-white rounded-full shadow-md hover:bg-red-50 transition-colors",title:"Quitar de favoritos",children:e.jsx(S,{className:"h-4 w-4 text-red-500"})}),s.promotion&&l(s)&&e.jsx("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-md text-xs font-bold",children:l(s)}),e.jsxs("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-xs",children:["Agregado ",C(new Date(t.created_at),"dd/MM/yyyy")]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx(o,{to:`/product/${s.id}`,children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 hover:text-indigo-600 transition-colors",children:s.name})}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-3",children:[e.jsx(L,{className:"h-4 w-4 mr-1 text-indigo-500"}),e.jsxs("span",{children:["Llega en ",f(s)," días hábiles"]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"flex flex-col",children:s.promotion?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["$",s.price.toFixed(2)]}),e.jsxs("span",{className:"text-lg font-bold text-red-600",children:["$",(d=v(s))==null?void 0:d.toFixed(2)]})]}):e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["$",s.price.toFixed(2)]})}),e.jsxs("div",{className:"text-right",children:[j(),e.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Sin reseñas"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:a=>g(s,a),className:"flex-1 flex items-center justify-center px-3 py-2 border border-indigo-600 text-indigo-600 rounded-md hover:bg-indigo-50 transition-colors",children:[e.jsx(P,{className:"h-4 w-4 mr-1"}),"Agregar"]}),e.jsx("button",{onClick:a=>u(s.id,a),className:"flex-1 px-3 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Comprar"})]})]})]},t.id):null})})})]})]})})}export{E as default};
